version: "3.9"

services:
  backend:
    build: ./backend
    container_name: stjude-backend
    ports:
      # Expose container port 5000 on host port 7700
      - "7700:5000"
    environment:
      # Optional: adjust as needed
      - PYTHONUNBUFFERED=1
    volumes:
      # Persist the SQLite DB outside the container (optional)
      - ./backend/stjude.db:/app/stjude.db
      # Mount uploads directory for PDFs and file uploads
      - ./backend/uploads:/app/uploads
      # Mount projects directory for project files
      - ./backend/projects:/app/projects
    # If you later add env vars (e.g. JWT_SECRET_KEY), you can use:
    # env_file:
    #   - ./backend/.env
    restart: unless-stopped

